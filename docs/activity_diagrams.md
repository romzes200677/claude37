# Диаграммы активности AiTestPlatform

В этом документе представлены диаграммы активности (Activity Diagrams) для визуализации основных процессов системы AiTestPlatform.

## Содержание

1. [Регистрация и аутентификация пользователя](#регистрация-и-аутентификация-пользователя)
2. [Создание и публикация курса](#создание-и-публикация-курса)
3. [Запись студента на курс](#запись-студента-на-курс)
4. [Прохождение урока](#прохождение-урока)
5. [Прохождение теста](#прохождение-теста)
6. [Выполнение задания по программированию](#выполнение-задания-по-программированию)
7. [Выдача сертификата](#выдача-сертификата)
8. [Отправка уведомлений](#отправка-уведомлений)

## Регистрация и аутентификация пользователя

```mermaid
flowchart TD
    A[Начало] --> B{Пользователь зарегистрирован?}
    B -->|Нет| C[Заполнение формы регистрации]
    B -->|Да| J[Ввод учетных данных]
    
    C --> D[Отправка данных]
    D --> E{Валидация данных}
    E -->|Ошибка| F[Отображение ошибок]
    F --> C
    
    E -->|Успех| G[Создание учетной записи]
    G --> H[Отправка письма подтверждения]
    H --> I[Отображение сообщения об успешной регистрации]
    
    J --> K{Проверка учетных данных}
    K -->|Неверные данные| L[Отображение ошибки аутентификации]
    L --> J
    
    K -->|Верные данные| M{Требуется 2FA?}
    M -->|Да| N[Запрос кода 2FA]
    N --> O{Проверка кода}
    O -->|Неверный код| P[Отображение ошибки]
    P --> N
    
    O -->|Верный код| Q[Аутентификация пользователя]
    M -->|Нет| Q
    
    I --> R[Конец]
    Q --> R
```

## Создание и публикация курса

```mermaid
flowchart TD
    A[Начало] --> B[Создание нового курса]
    B --> C[Заполнение основной информации]
    C --> D[Сохранение черновика]
    
    D --> E[Добавление модулей]
    E --> F[Добавление уроков в модули]
    F --> G[Добавление материалов к урокам]
    
    G --> H[Добавление тестов]
    H --> I[Добавление заданий по программированию]
    
    I --> J{Курс готов к публикации?}
    J -->|Нет| K[Доработка курса]
    K --> J
    
    J -->|Да| L[Отправка на проверку]
    L --> M{Проверка администратором}
    M -->|Отклонено| N[Получение комментариев]
    N --> K
    
    M -->|Одобрено| O[Публикация курса]
    O --> P[Отправка уведомлений подписчикам]
    P --> Q[Конец]
```

## Запись студента на курс

```mermaid
flowchart TD
    A[Начало] --> B[Просмотр каталога курсов]
    B --> C[Выбор курса]
    C --> D[Просмотр информации о курсе]
    
    D --> E{Курс платный?}
    E -->|Да| F[Переход к оплате]
    F --> G{Оплата успешна?}
    G -->|Нет| H[Отображение ошибки оплаты]
    H --> F
    
    G -->|Да| I[Запись на курс]
    E -->|Нет| I
    
    I --> J[Создание записи о зачислении]
    J --> K[Отправка уведомления о зачислении]
    K --> L[Предоставление доступа к материалам]
    
    L --> M[Отображение первого урока]
    M --> N[Конец]
```

## Прохождение урока

```mermaid
flowchart TD
    A[Начало] --> B[Выбор курса из списка зачислений]
    B --> C[Выбор модуля]
    C --> D[Выбор урока]
    
    D --> E[Отображение материалов урока]
    E --> F[Изучение материалов]
    
    F --> G{Есть тест после урока?}
    G -->|Да| H[Прохождение теста]
    H --> I{Тест пройден?}
    I -->|Нет| J[Повторное изучение материалов]
    J --> H
    
    I -->|Да| K[Отметка урока как завершенного]
    G -->|Нет| K
    
    K --> L{Есть следующий урок?}
    L -->|Да| M[Переход к следующему уроку]
    M --> E
    
    L -->|Нет| N{Есть следующий модуль?}
    N -->|Да| O[Переход к следующему модулю]
    O --> C
    
    N -->|Нет| P[Завершение курса]
    P --> Q[Конец]
```

## Прохождение теста

```mermaid
flowchart TD
    A[Начало] --> B[Открытие теста]
    B --> C[Отображение инструкций]
    
    C --> D{Тест с ограничением времени?}
    D -->|Да| E[Запуск таймера]
    D -->|Нет| F[Начало теста]
    E --> F
    
    F --> G[Отображение вопроса]
    G --> H[Выбор/ввод ответа]
    
    H --> I{Последний вопрос?}
    I -->|Нет| J[Переход к следующему вопросу]
    J --> G
    
    I -->|Да| K[Завершение теста]
    
    K --> L[Проверка ответов]
    L --> M[Расчет результата]
    
    M --> N[Отображение результатов]
    N --> O{Проходной балл достигнут?}
    O -->|Да| P[Отметка теста как пройденного]
    O -->|Нет| Q{Есть попытки?}
    
    Q -->|Да| R[Предложение повторить тест]
    R --> S{Повторить?}
    S -->|Да| B
    S -->|Нет| T[Конец]
    
    Q -->|Нет| U[Отметка теста как непройденного]
    
    P --> T
    U --> T
```

## Выполнение задания по программированию

```mermaid
flowchart TD
    A[Начало] --> B[Открытие задания]
    B --> C[Отображение описания и требований]
    
    C --> D[Открытие редактора кода]
    D --> E[Написание кода]
    
    E --> F{Запустить тесты?}
    F -->|Да| G[Запуск тестов]
    G --> H{Тесты пройдены?}
    H -->|Нет| I[Отображение ошибок]
    I --> E
    
    H -->|Да| J[Отображение успешного результата]
    J --> K{Отправить решение?}
    F -->|Нет| K
    
    K -->|Нет| E
    K -->|Да| L[Отправка решения]
    
    L --> M[Проверка решения системой]
    M --> N{Все тесты пройдены?}
    N -->|Нет| O[Отображение результатов и ошибок]
    O --> P{Есть попытки?}
    P -->|Да| Q{Повторить?}
    Q -->|Да| E
    Q -->|Нет| R[Конец]
    
    P -->|Нет| S[Отметка задания как непройденного]
    S --> R
    
    N -->|Да| T[Отметка задания как пройденного]
    T --> U[Начисление баллов]
    U --> R
```

## Выдача сертификата

```mermaid
flowchart TD
    A[Начало] --> B{Все требования курса выполнены?}
    B -->|Нет| C[Отображение невыполненных требований]
    C --> D[Конец]
    
    B -->|Да| E[Запрос на генерацию сертификата]
    E --> F[Проверка данных пользователя]
    
    F --> G{Данные корректны?}
    G -->|Нет| H[Запрос на обновление данных]
    H --> I[Обновление данных]
    I --> F
    
    G -->|Да| J[Генерация сертификата]
    J --> K[Создание уникального кода верификации]
    K --> L[Сохранение сертификата в системе]
    
    L --> M[Отправка сертификата пользователю]
    M --> N[Отправка уведомления о выдаче сертификата]
    
    N --> O[Обновление статуса курса на "Завершен"]
    O --> P[Конец]
```

## Отправка уведомлений

```mermaid
flowchart TD
    A[Начало] --> B[Событие, требующее уведомления]
    
    B --> C[Определение типа уведомления]
    C --> D[Получение списка получателей]
    
    D --> E[Проверка настроек уведомлений получателей]
    
    E --> F{Отправлять Email?}
    F -->|Да| G[Формирование Email-сообщения]
    G --> H[Отправка Email]
    
    F -->|Нет| I{Отправлять Push?}
    H --> I
    
    I -->|Да| J[Формирование Push-уведомления]
    J --> K[Отправка Push-уведомления]
    
    I -->|Нет| L{Отправлять SMS?}
    K --> L
    
    L -->|Да| M[Формирование SMS-сообщения]
    M --> N[Отправка SMS]
    
    L -->|Нет| O[Создание внутрисистемного уведомления]
    N --> O
    
    O --> P[Сохранение записи об отправке]
    P --> Q[Конец]
```

## Заключение

Диаграммы активности (Activity Diagrams) предоставляют наглядное представление о последовательности действий и потоке управления в основных процессах системы AiTestPlatform. Они помогают понять:

1. Последовательность шагов в каждом процессе
2. Точки принятия решений и ветвления процессов
3. Параллельные действия, если они присутствуют
4. Взаимодействие между различными компонентами системы

Эти диаграммы являются важным инструментом для разработчиков и аналитиков, позволяя им лучше понять поведение системы и правильно реализовать бизнес-логику, связанную с основными процессами.