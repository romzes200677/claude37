# Диаграммы состояний AiTestPlatform

В этом документе представлены диаграммы состояний (State Diagrams) для визуализации жизненного цикла ключевых сущностей системы AiTestPlatform.

## Содержание

1. [Жизненный цикл пользователя](#жизненный-цикл-пользователя)
2. [Жизненный цикл курса](#жизненный-цикл-курса)
3. [Жизненный цикл урока](#жизненный-цикл-урока)
4. [Жизненный цикл записи на курс](#жизненный-цикл-записи-на-курс)
5. [Жизненный цикл теста](#жизненный-цикл-теста)
6. [Жизненный цикл задания по программированию](#жизненный-цикл-задания-по-программированию)
7. [Жизненный цикл сертификата](#жизненный-цикл-сертификата)
8. [Жизненный цикл уведомления](#жизненный-цикл-уведомления)

## Жизненный цикл пользователя

```mermaid
stateDiagram-v2
    [*] --> Зарегистрирован: Регистрация
    Зарегистрирован --> EmailПодтвержден: Подтверждение email
    Зарегистрирован --> Удален: Удаление аккаунта
    EmailПодтвержден --> Активный: Первый вход
    
    state Активный {
        [*] --> Онлайн: Вход в систему
        Онлайн --> Офлайн: Выход из системы
        Офлайн --> Онлайн: Вход в систему
    }
    
    Активный --> Заблокирован: Блокировка администратором
    Заблокирован --> Активный: Разблокировка администратором
    Активный --> Удален: Удаление аккаунта
    Заблокирован --> Удален: Удаление аккаунта
    
    Удален --> [*]
```

## Жизненный цикл курса

```mermaid
stateDiagram-v2
    [*] --> Черновик: Создание курса
    
    Черновик --> НаПроверке: Отправка на проверку
    Черновик --> Удален: Удаление
    
    НаПроверке --> Черновик: Возврат на доработку
    НаПроверке --> Опубликован: Одобрение публикации
    НаПроверке --> Отклонен: Отклонение публикации
    
    Отклонен --> Черновик: Редактирование
    Отклонен --> Удален: Удаление
    
    Опубликован --> Архивирован: Архивация
    Опубликован --> Черновик: Снятие с публикации
    
    Архивирован --> Опубликован: Восстановление
    Архивирован --> Удален: Удаление
    
    Удален --> [*]
```

## Жизненный цикл урока

```mermaid
stateDiagram-v2
    [*] --> Черновик: Создание урока
    
    Черновик --> Готов: Завершение подготовки
    Черновик --> Удален: Удаление
    
    Готов --> Опубликован: Публикация курса
    Готов --> Черновик: Редактирование
    Готов --> Удален: Удаление
    
    Опубликован --> Обновляется: Начало обновления
    Опубликован --> Архивирован: Архивация курса
    
    Обновляется --> Опубликован: Завершение обновления
    
    Архивирован --> Опубликован: Восстановление курса
    Архивирован --> Удален: Удаление
    
    Удален --> [*]
```

## Жизненный цикл записи на курс

```mermaid
stateDiagram-v2
    [*] --> Инициирована: Запрос на запись
    
    Инициирована --> Ожидает_Оплаты: Платный курс
    Инициирована --> Активная: Бесплатный курс
    
    Ожидает_Оплаты --> Активная: Успешная оплата
    Ожидает_Оплаты --> Отменена: Отмена записи
    Ожидает_Оплаты --> Отменена: Истечение времени ожидания
    
    Активная --> Приостановлена: Приостановка студентом
    Активная --> Приостановлена: Приостановка администратором
    Активная --> Завершена: Выполнение всех требований
    Активная --> Отменена: Отмена записи
    
    Приостановлена --> Активная: Возобновление
    Приостановлена --> Отменена: Отмена записи
    
    Завершена --> [*]
    Отменена --> [*]
```

## Жизненный цикл теста

```mermaid
stateDiagram-v2
    [*] --> Черновик: Создание теста
    
    Черновик --> Готов: Завершение подготовки
    Черновик --> Удален: Удаление
    
    Готов --> Опубликован: Публикация
    Готов --> Черновик: Редактирование
    Готов --> Удален: Удаление
    
    Опубликован --> Активный: Начало периода тестирования
    Опубликован --> Черновик: Снятие с публикации
    
    Активный --> Завершен: Окончание периода тестирования
    Активный --> Приостановлен: Приостановка
    
    Приостановлен --> Активный: Возобновление
    Приостановлен --> Завершен: Окончание периода тестирования
    
    Завершен --> Архивирован: Архивация
    Завершен --> Опубликован: Повторная активация
    
    Архивирован --> Удален: Удаление
    
    Удален --> [*]
```

## Жизненный цикл задания по программированию

```mermaid
stateDiagram-v2
    [*] --> Черновик: Создание задания
    
    Черновик --> Готов: Завершение подготовки
    Черновик --> Удален: Удаление
    
    Готов --> Опубликован: Публикация
    Готов --> Черновик: Редактирование
    Готов --> Удален: Удаление
    
    Опубликован --> Активный: Начало периода выполнения
    Опубликован --> Черновик: Снятие с публикации
    
    Активный --> Завершен: Окончание периода выполнения
    Активный --> Приостановлен: Приостановка
    
    Приостановлен --> Активный: Возобновление
    Приостановлен --> Завершен: Окончание периода выполнения
    
    Завершен --> Архивирован: Архивация
    Завершен --> Опубликован: Повторная активация
    
    Архивирован --> Удален: Удаление
    
    Удален --> [*]
```

## Жизненный цикл попытки выполнения задания

```mermaid
stateDiagram-v2
    [*] --> Создана: Начало выполнения
    
    Создана --> Отправлена: Отправка решения
    Создана --> Отменена: Отмена попытки
    
    Отправлена --> Проверяется: Начало проверки
    
    Проверяется --> Успешна: Все тесты пройдены
    Проверяется --> Частично_Успешна: Часть тестов пройдена
    Проверяется --> Неуспешна: Тесты не пройдены
    Проверяется --> Ошибка: Ошибка выполнения
    
    Успешна --> Завершена: Завершение попытки
    Частично_Успешна --> Завершена: Завершение попытки
    Неуспешна --> Завершена: Завершение попытки
    Ошибка --> Завершена: Завершение попытки
    
    Отменена --> [*]
    Завершена --> [*]
```

## Жизненный цикл сертификата

```mermaid
stateDiagram-v2
    [*] --> Запрошен: Запрос на выдачу
    
    Запрошен --> Генерируется: Начало генерации
    
    Генерируется --> Выдан: Успешная генерация
    Генерируется --> Ошибка: Ошибка генерации
    
    Ошибка --> Генерируется: Повторная попытка
    Ошибка --> Отменен: Отмена выдачи
    
    Выдан --> Активный: Активация
    
    Активный --> Отозван: Отзыв сертификата
    Активный --> Истек: Истечение срока действия
    
    Отозван --> [*]
    Истек --> [*]
    Отменен --> [*]
```

## Жизненный цикл уведомления

```mermaid
stateDiagram-v2
    [*] --> Создано: Создание уведомления
    
    Создано --> Отправлено: Отправка
    Создано --> Отменено: Отмена
    
    Отправлено --> Доставлено: Подтверждение доставки
    Отправлено --> Ошибка_Доставки: Ошибка доставки
    
    Ошибка_Доставки --> Отправлено: Повторная отправка
    Ошибка_Доставки --> Отменено: Отмена после ошибок
    
    Доставлено --> Прочитано: Прочтение пользователем
    Доставлено --> Удалено: Удаление без прочтения
    
    Прочитано --> Удалено: Удаление
    
    Отменено --> [*]
    Удалено --> [*]
```

## Заключение

Диаграммы состояний (State Diagrams) предоставляют наглядное представление о жизненном цикле ключевых сущностей системы AiTestPlatform. Они помогают понять:

1. Возможные состояния, в которых может находиться сущность
2. События, которые вызывают переход из одного состояния в другое
3. Последовательность изменения состояний в течение жизненного цикла
4. Конечные состояния, в которых завершается жизненный цикл

Эти диаграммы являются важным инструментом для разработчиков и аналитиков, позволяя им лучше понять поведение системы и правильно реализовать бизнес-логику, связанную с изменением состояний сущностей.